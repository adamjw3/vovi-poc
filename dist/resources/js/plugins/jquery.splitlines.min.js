!function(d){function c(t){return t.clone().css({position:"absolute"})}function f(t){return t.split(/\s+/)}function u(t,e,n){e=d(t='<div class="stop">'+t).find('*:not(:has("*"))').html(e).closest(".stop").slice(-1);return e.children().each(function(t,e){e.style.setProperty("--line-index",n)}),e.html()}d.fn.splitLines=function(t){var e={width:"auto",tag:"<div>",wrap:"",keepHtml:!0};t&&d.extend(e,t);var n=c(this),h=this.contents(),i=this.text();this.append(n),n.text("42");var l=n.height()+2;n.empty();var s=c(n),t=e.width;"auto"===e.width&&(t=this[0].offsetWidth),s.width(t),this.append(s);for(var o,r=e.keepHtml?function t(e){for(var n=[],h=0;h<e.length;h++)if("BR"!==e[h].nodeName){if(3==e[h].nodeType)l=f(e[h].textContent||e[h].toString());else for(var i=d(e[h]).clone(),l=t(i.contents()),s=0;s<l.length;s++)i.empty(),l[s]=i.html(l[s]).wrap("<p></p>").parent().html();for(var o=0;o<l.length;o++)""!==l[o]&&n.push(l[o])}else n.push("<br>");return n}(h):f(i),a=0,p=0;p<r.length;p++){var m=s.html();s.html(m+r[p]+" "),s.html()!=o?s.height()>l&&(o=s.html(),s.html(m),n.append(u(e.tag,s.html(),a)),s.html(""),p--,a++):(o="",n.append(u(e.tag,s.html(),a)),s.html(""))}n.append(u(e.tag,s.html(),a)),this.html(n.html())}}(jQuery);